group   'dev.moaz.dash_bubble'
version '1.0-SNAPSHOT'


/* ------------------------------------------------------------------ */
/* 1)  Configurações que dizem respeito ao PRÓPRIO Gradle / AGP       */
/* ------------------------------------------------------------------ */
// build.gradle (módulo Android) – estilo “clássico” compatível com Gradle 8.4 + AGP 8.2.2

//------------------------------------------------------------
// 1)  Configuração do próprio Gradle / Android Gradle Plugin
//------------------------------------------------------------
buildscript {
    repositories {
        google()
        mavenCentral()
    }
    dependencies {
        // Android Gradle Plugin & Kotlin Gradle Plugin
        classpath "com.android.tools.build:gradle:8.2.2"
        classpath "org.jetbrains.kotlin:kotlin-gradle-plugin:1.9.22"
    }
}

//------------------------------------------------------------
// 2)  Repositórios para todos os sub‑projetos
//------------------------------------------------------------
allprojects {
    repositories {
        google()
        mavenCentral()
        maven { url 'https://storage.googleapis.com/download.flutter.io' }
    }
}

//------------------------------------------------------------
// 3)  Aplicação dos plugins neste módulo
//------------------------------------------------------------
apply plugin: 'com.android.library'
apply plugin: 'kotlin-android'
apply plugin: 'kotlin-parcelize'

//------------------------------------------------------------
// 4)  Informações do artefato
//------------------------------------------------------------
group   = 'dev.moaz.dash_bubble'
version = '1.0-SNAPSHOT'

//------------------------------------------------------------
// 5)  Bloco Android
//------------------------------------------------------------
android {
    namespace "dev.moaz.dash_bubble"
    compileSdk 34

    defaultConfig {
        minSdk 21
    }

    compileOptions {
        sourceCompatibility JavaVersion.VERSION_1_8
        targetCompatibility JavaVersion.VERSION_1_8
    }
    kotlinOptions {
        jvmTarget = '1.8'
    }

    // diretório Kotlin extra
    sourceSets {
        main.java.srcDirs += 'src/main/kotlin'
    }
}

//------------------------------------------------------------
// 6)  Flutter embedding local (evita baixar artefato)
//------------------------------------------------------------

def flutterRoot = System.getenv('FLUTTER_ROOT')
if (flutterRoot == null) {
    throw new GradleException('Defina a variável de ambiente FLUTTER_ROOT apontando para o SDK Flutter.')
}

// ATENÇÃO ao F maiúsculo!
def flutterJar = file("/home/daniel/development/flutter/bin/cache/artifacts/engine/android-arm64/flutter.jar")


//------------------------------------------------------------
// 7)  Dependências
//------------------------------------------------------------

dependencies {
    // usado apenas em tempo de compilação – não embarca no AAR final
    compileOnly files(flutterJar)      // ✔️  mantém só esta linha

    implementation 'androidx.core:core-ktx:1.12.0'
    implementation 'androidx.localbroadcastmanager:localbroadcastmanager:1.1.0'
    implementation 'io.github.torrydo:floating-bubble-view:0.5.3'

    coreLibraryDesugaring 'com.android.tools:desugar_jdk_libs:2.0.4'

}
